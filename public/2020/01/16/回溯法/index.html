<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>回溯法 | Reborn</title><meta name="description" content="回溯法"><meta name="keywords" content="Algorithm,回溯法,递归"><meta name="author" content="Reborn"><meta name="copyright" content="Reborn"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="baidu-site-verification" content="Vkh2aRZcUl"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="回溯法"><meta name="twitter:description" content="回溯法"><meta name="twitter:image" content="https://i.loli.net/2020/01/16/HonEJBSegxdMpOj.png"><meta property="og:type" content="article"><meta property="og:title" content="回溯法"><meta property="og:url" content="https://reborn8888.github.io/2020/01/16/%E5%9B%9E%E6%BA%AF%E6%B3%95/"><meta property="og:site_name" content="Reborn"><meta property="og:description" content="回溯法"><meta property="og:image" content="https://i.loli.net/2020/01/16/HonEJBSegxdMpOj.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = '2'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"><link rel="canonical" href="https://reborn8888.github.io/2020/01/16/%E5%9B%9E%E6%BA%AF%E6%B3%95/"><link rel="prev" title="奇异值分解——《统计学习方法》第15章学习笔记" href="https://reborn8888.github.io/2020/01/29/%E5%A5%87%E5%BC%82%E5%80%BC%E5%88%86%E8%A7%A3/"><link rel="next" title="激活函数" href="https://reborn8888.github.io/2019/12/26/%E6%BF%80%E6%B4%BB%E5%87%BD%E6%95%B0/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: true,
  fancybox: false,
  Snackbar: undefined,
  baiduPush: false,
  isHome: false,
  isPost: true
  
}</script><meta name="generator" content="Hexo 5.4.0"><link rel="stylesheet" href="\assets\css\APlayer.min.css" class="aplayer-style-marker">
<script src="\assets\js\APlayer.min.js" class="aplayer-script-marker"></script>
<script src="\assets\js\Meting.min.js" class="meting-script-marker"></script>
</head><body><header> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">Reborn</a></span><span class="toggle-menu pull_right close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div></div></span><span class="pull_right" id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> 搜索</span></a></span></div></header><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://rebornas.blob.core.windows.net/rebornhome/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">33</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">34</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">3</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">目录</div><div class="sidebar-toc__content"><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#%E5%9B%9E%E6%BA%AF%E6%B3%95%E7%AE%80%E8%BF%B0"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text"> 回溯法简述</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#%E7%AE%97%E6%B3%95%E9%A2%98%E6%A1%88%E4%BE%8B"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text"> 算法题案例</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#%E7%9F%A9%E9%98%B5%E4%B8%AD%E7%9A%84%E8%B7%AF%E5%BE%84"><span class="toc_mobile_items-number">2.1.</span> <span class="toc_mobile_items-text"> 矩阵中的路径</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#%E8%A7%A3%E9%A2%98%E6%80%9D%E8%B7%AF"><span class="toc_mobile_items-number">2.1.1.</span> <span class="toc_mobile_items-text"> 解题思路</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C"><span class="toc_mobile_items-number">2.1.2.</span> <span class="toc_mobile_items-text"> 运行结果</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#%E6%89%A9%E5%B1%95"><span class="toc_mobile_items-number">2.1.3.</span> <span class="toc_mobile_items-text"> 扩展</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#%E6%9C%BA%E5%99%A8%E4%BA%BA%E7%9A%84%E8%BF%90%E5%8A%A8%E8%8C%83%E5%9B%B4"><span class="toc_mobile_items-number">2.2.</span> <span class="toc_mobile_items-text"> 机器人的运动范围</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#%E8%A7%A3%E9%A2%98%E6%80%9D%E8%B7%AF-2"><span class="toc_mobile_items-number">2.2.1.</span> <span class="toc_mobile_items-text"> 解题思路</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C-2"><span class="toc_mobile_items-number">2.2.2.</span> <span class="toc_mobile_items-text"> 运行结果</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#%E7%94%B5%E8%AF%9D%E5%8F%B7%E7%A0%81%E7%9A%84%E5%AD%97%E6%AF%8D%E7%BB%84%E5%90%88"><span class="toc_mobile_items-number">2.3.</span> <span class="toc_mobile_items-text"> 电话号码的字母组合</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#%E8%A7%A3%E9%A2%98%E6%80%9D%E8%B7%AF-3"><span class="toc_mobile_items-number">2.3.1.</span> <span class="toc_mobile_items-text"> 解题思路</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C-3"><span class="toc_mobile_items-number">2.3.2.</span> <span class="toc_mobile_items-text"> 运行结果</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#%E8%A7%A3%E6%95%B0%E7%8B%AC"><span class="toc_mobile_items-number">2.4.</span> <span class="toc_mobile_items-text"> 解数独</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#%E8%A7%A3%E9%A2%98%E6%80%9D%E8%B7%AF-4"><span class="toc_mobile_items-number">2.4.1.</span> <span class="toc_mobile_items-text"> 解题思路</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C-4"><span class="toc_mobile_items-number">2.4.2.</span> <span class="toc_mobile_items-text"> 运行结果</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#n%E7%9A%87%E5%90%8E"><span class="toc_mobile_items-number">2.5.</span> <span class="toc_mobile_items-text"> N皇后</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#%E8%A7%A3%E9%A2%98%E6%80%9D%E8%B7%AF-5"><span class="toc_mobile_items-number">2.5.1.</span> <span class="toc_mobile_items-text"> 解题思路</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C-5"><span class="toc_mobile_items-number">2.5.2.</span> <span class="toc_mobile_items-text"> 运行结果</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#%E4%BC%98%E5%8C%96"><span class="toc_mobile_items-number">2.5.3.</span> <span class="toc_mobile_items-text"> 优化</span></a></li></ol></li></ol></li></ol></div></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9E%E6%BA%AF%E6%B3%95%E7%AE%80%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text"> 回溯法简述</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AE%97%E6%B3%95%E9%A2%98%E6%A1%88%E4%BE%8B"><span class="toc-number">2.</span> <span class="toc-text"> 算法题案例</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A9%E9%98%B5%E4%B8%AD%E7%9A%84%E8%B7%AF%E5%BE%84"><span class="toc-number">2.1.</span> <span class="toc-text"> 矩阵中的路径</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E9%A2%98%E6%80%9D%E8%B7%AF"><span class="toc-number">2.1.1.</span> <span class="toc-text"> 解题思路</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C"><span class="toc-number">2.1.2.</span> <span class="toc-text"> 运行结果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%A9%E5%B1%95"><span class="toc-number">2.1.3.</span> <span class="toc-text"> 扩展</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%BA%E5%99%A8%E4%BA%BA%E7%9A%84%E8%BF%90%E5%8A%A8%E8%8C%83%E5%9B%B4"><span class="toc-number">2.2.</span> <span class="toc-text"> 机器人的运动范围</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E9%A2%98%E6%80%9D%E8%B7%AF-2"><span class="toc-number">2.2.1.</span> <span class="toc-text"> 解题思路</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C-2"><span class="toc-number">2.2.2.</span> <span class="toc-text"> 运行结果</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%B5%E8%AF%9D%E5%8F%B7%E7%A0%81%E7%9A%84%E5%AD%97%E6%AF%8D%E7%BB%84%E5%90%88"><span class="toc-number">2.3.</span> <span class="toc-text"> 电话号码的字母组合</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E9%A2%98%E6%80%9D%E8%B7%AF-3"><span class="toc-number">2.3.1.</span> <span class="toc-text"> 解题思路</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C-3"><span class="toc-number">2.3.2.</span> <span class="toc-text"> 运行结果</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A3%E6%95%B0%E7%8B%AC"><span class="toc-number">2.4.</span> <span class="toc-text"> 解数独</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E9%A2%98%E6%80%9D%E8%B7%AF-4"><span class="toc-number">2.4.1.</span> <span class="toc-text"> 解题思路</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C-4"><span class="toc-number">2.4.2.</span> <span class="toc-text"> 运行结果</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#n%E7%9A%87%E5%90%8E"><span class="toc-number">2.5.</span> <span class="toc-text"> N皇后</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E9%A2%98%E6%80%9D%E8%B7%AF-5"><span class="toc-number">2.5.1.</span> <span class="toc-text"> 解题思路</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C-5"><span class="toc-number">2.5.2.</span> <span class="toc-text"> 运行结果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%98%E5%8C%96"><span class="toc-number">2.5.3.</span> <span class="toc-text"> 优化</span></a></li></ol></li></ol></li></ol></div></div></div><main id="content-outer"><div id="top-container" style="background-image: url(https://i.loli.net/2020/01/16/HonEJBSegxdMpOj.png)"><div id="post-info"><div id="post-title"><div class="posttitle">回溯法</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 发表于 2020-01-16<span class="post-meta__separator">|</span><i class="fa fa-history fa-fw" aria-hidden="true"></i> 更新于 2020-09-21</time><span class="post-meta__separator">|</span><span><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a></span><div class="post-meta-wordcount"><i class="fa fa-file-word-o post-meta__icon fa-fw" aria-hidden="true"></i><span>字数总计:</span><span class="word-count">3.2k</span><span class="post-meta__separator">|</span><i class="fa fa-clock-o post-meta__icon fa-fw" aria-hidden="true"></i><span>阅读时长: 13 分钟</span><div class="post-meta-pv-cv"><span class="post-meta__separator">|</span><span><i class="fa fa-eye post-meta__icon fa-fw" aria-hidden="true"> </i>阅读量:</span><span id="busuanzi_value_page_pv"></span></div></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><html><head>
    </head><body><div id="aplayer-KecSPahH" class="aplayer aplayer-tag-marker meting-tag-marker" data-id="27483204" data-server="netease" data-type="song" data-mode="circulation" data-autoplay="true" data-mutex="false" data-listmaxheight="340px" data-preload="auto" data-theme="#ad7a86"></div>
<h1 id="回溯法简述"><a class="markdownIt-Anchor" href="#回溯法简述"></a> 回溯法简述</h1>
<p>回溯法是暴力法的升级版，我们可以将其解决问题的过程想象成一颗树，属于树型问题。</p>
<p>从根节点<strong>R</strong>开始，一步一步向下走，而每一步都会有多个（有限个）选择，对应多个子节点（<strong>A, B, C…</strong>）。若当前节点<strong>A</strong>匹配成功，则进入该节点的子节点（<strong>A-1, A-2, A-3…</strong>）继续匹配；若当前节点<strong>A</strong>匹配失败，则回到其父节点，继续匹配其他未曾匹配过的<strong>A</strong>的兄弟节点（<strong>B, C…</strong>），此过程称为<strong>回溯</strong>。</p>
<blockquote>
<p>整个过程可以通过<strong>递归</strong>实现（深度优先遍历），也可以用<strong>栈</strong>实现。</p>
</blockquote>
<h1 id="算法题案例"><a class="markdownIt-Anchor" href="#算法题案例"></a> 算法题案例</h1>
<h2 id="矩阵中的路径"><a class="markdownIt-Anchor" href="#矩阵中的路径"></a> 矩阵中的路径</h2>
<p><strong>题目来源</strong>：剑指Offer<br>
<strong>题目链接</strong>：<a href="https://www.nowcoder.com/practice/c61c6999eecb4b8f88a98f66b273a3cc?tpId=13&tqId=11218&tPage=4&rp=4&ru=/ta/coding-interviews&qru=/ta/coding-interviews/question-ranking" target="_blank" rel="noopener">牛客网-剑指Offer</a><br>
<strong>题目描述</strong>：</p>
<blockquote>
<p>请设计一个函数，用来判断在一个矩阵中是否存在一条包含某字符串所有字符的路径。路径可以从矩阵中的任意一个格子开始，每一步可以在矩阵中向左，向右，向上，向下移动一个格子。如果一条路径经过了矩阵中的某一个格子，则该路径不能再进入该格子。 例如 a b c e s f c s a d e e 矩阵中包含一条字符串"bcced"的路径，但是矩阵中不包含"abcb"路径，因为字符串的第一个字符b占据了矩阵中的第一行第二个格子之后，路径不能再次进入该格子。</p>
</blockquote>
<h3 id="解题思路"><a class="markdownIt-Anchor" href="#解题思路"></a> 解题思路</h3>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">judge</span><span class="params">(self, matrix, path, r, c, length)</span>:</span></span><br><span class="line">        idx = self.cols * r + c <span class="comment"># 由于matrix为字符串形式，需手动根据r和c获取一维索引号</span></span><br><span class="line">        <span class="keyword">if</span>(r < <span class="number">0</span> <span class="keyword">or</span> r >= self.rows <span class="keyword">or</span>       <span class="comment"># 越界</span></span><br><span class="line">           c < <span class="number">0</span> <span class="keyword">or</span> c >= self.cols <span class="keyword">or</span>       <span class="comment"># 越界</span></span><br><span class="line">           matrix[idx] != path[length] <span class="keyword">or</span>   <span class="comment"># 当前元素不匹配</span></span><br><span class="line">           self.visited[r][c] == <span class="number">1</span>):        <span class="comment"># 当前元素已访问</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        length += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span>(len(path) == length): <span class="comment"># 已找到一条路径</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        self.visited[r][c] = <span class="number">1</span> <span class="comment"># 当前元素标记为已访问</span></span><br><span class="line">        <span class="keyword">if</span>(self.judge(matrix, path, r<span class="number">-1</span>, c, length) <span class="keyword">or</span> <span class="comment"># 上侧</span></span><br><span class="line">           self.judge(matrix, path, r+<span class="number">1</span>, c, length) <span class="keyword">or</span> <span class="comment"># 下侧</span></span><br><span class="line">           self.judge(matrix, path, r, c<span class="number">-1</span>, length) <span class="keyword">or</span> <span class="comment"># 左侧</span></span><br><span class="line">           self.judge(matrix, path, r, c+<span class="number">1</span>, length)):  <span class="comment"># 右侧</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        self.visited[r][c] = <span class="number">0</span> <span class="comment"># 回溯回来，将当前元素标记为未访问</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">hasPath</span><span class="params">(self, matrix, rows, cols, path)</span>:</span> <span class="comment"># main</span></span><br><span class="line">        self.rows = rows</span><br><span class="line">        self.cols = cols</span><br><span class="line">        self.visited = [[<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(cols)] <span class="keyword">for</span> _ <span class="keyword">in</span> range(rows)] <span class="comment"># 记录对应元素是否已访问</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 对matrix中每一个元素进行遍历判断</span></span><br><span class="line">        <span class="keyword">for</span> r <span class="keyword">in</span> range(rows):</span><br><span class="line">            <span class="keyword">for</span> c <span class="keyword">in</span> range(cols):</span><br><span class="line">                <span class="keyword">if</span>(self.judge(matrix, path, r, c, <span class="number">0</span>)): <span class="comment"># 只要找到一条路径，直接返回True</span></span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br></pre></td></tr></tbody></table></figure></div>
<h3 id="运行结果"><a class="markdownIt-Anchor" href="#运行结果"></a> 运行结果</h3>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">solu = Solution()</span><br><span class="line">print(solu.hasPath(<span class="string">"ABCESFCSADEE"</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="string">"ABFDEESE"</span>))</span><br><span class="line"></span><br><span class="line"><span class="meta">>>> </span><span class="literal">True</span></span><br></pre></td></tr></tbody></table></figure></div>
<h3 id="扩展"><a class="markdownIt-Anchor" href="#扩展"></a> 扩展</h3>
<ul>
<li>同时记录path所经过的路径坐标(self.path相关部分的代码)</li>
</ul>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span>    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">judge</span><span class="params">(self, matrix, path, r, c, length)</span>:</span></span><br><span class="line">        idx = self.cols * r + c <span class="comment"># 由于matrix为字符串形式，需手动根据r和c获取一维索引号</span></span><br><span class="line">        <span class="keyword">if</span>(r < <span class="number">0</span> <span class="keyword">or</span> r >= self.rows <span class="keyword">or</span>       <span class="comment"># 越界</span></span><br><span class="line">           c < <span class="number">0</span> <span class="keyword">or</span> c >= self.cols <span class="keyword">or</span>       <span class="comment"># 越界</span></span><br><span class="line">           matrix[idx] != path[length] <span class="keyword">or</span>   <span class="comment"># 当前元素不匹配</span></span><br><span class="line">           self.visited[r][c] == <span class="number">1</span>):        <span class="comment"># 当前元素已访问</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        length += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span>(len(path) == length): <span class="comment"># 已找到一条路径</span></span><br><span class="line">            self.path.append((r, c)) <span class="comment"># 将最后的坐标入栈</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        self.path.append((r, c)) <span class="comment"># 当前元素匹配，将其坐标入栈</span></span><br><span class="line">        self.visited[r][c] = <span class="number">1</span> <span class="comment"># 当前元素标记为已访问</span></span><br><span class="line">        <span class="keyword">if</span>(self.judge(matrix, path, r<span class="number">-1</span>, c, length) <span class="keyword">or</span> <span class="comment"># 上侧</span></span><br><span class="line">           self.judge(matrix, path, r+<span class="number">1</span>, c, length) <span class="keyword">or</span> <span class="comment"># 下侧</span></span><br><span class="line">           self.judge(matrix, path, r, c<span class="number">-1</span>, length) <span class="keyword">or</span> <span class="comment"># 左侧</span></span><br><span class="line">           self.judge(matrix, path, r, c+<span class="number">1</span>, length)):  <span class="comment"># 右侧</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        self.visited[r][c] = <span class="number">0</span> <span class="comment"># 回溯回来，将当前元素标记为未访问</span></span><br><span class="line">        self.path.pop() <span class="comment"># 回溯回来，将当前元素坐标出栈</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">hasPath</span><span class="params">(self, matrix, rows, cols, path)</span>:</span> <span class="comment"># main</span></span><br><span class="line">        <span class="comment"># write code here</span></span><br><span class="line">        self.rows = rows</span><br><span class="line">        self.cols = cols</span><br><span class="line">        self.visited = [[<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(cols)] <span class="keyword">for</span> _ <span class="keyword">in</span> range(rows)] <span class="comment"># 记录对应元素是否已访问</span></span><br><span class="line">        self.path = [] <span class="comment"># 用来记录路径的坐标</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 对matrix中每一个元素进行遍历判断</span></span><br><span class="line">        <span class="keyword">for</span> r <span class="keyword">in</span> range(rows):</span><br><span class="line">            <span class="keyword">for</span> c <span class="keyword">in</span> range(cols):</span><br><span class="line">                <span class="keyword">if</span>(self.judge(matrix, path, r, c, <span class="number">0</span>)): <span class="comment"># 只要找到一条路径，直接返回True</span></span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br></pre></td></tr></tbody></table></figure></div>
<ul>
<li>运行结果</li>
</ul>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">solu = Solution()</span><br><span class="line">print(solu.hasPath(<span class="string">"ABCESFCSADEE"</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="string">"ABFDEESE"</span>))</span><br><span class="line">print(solu.path)</span><br><span class="line"></span><br><span class="line"><span class="meta">>>> </span><span class="literal">True</span></span><br><span class="line"><span class="meta">>>> </span>[(<span class="number">0</span>, <span class="number">0</span>), (<span class="number">0</span>, <span class="number">1</span>), (<span class="number">1</span>, <span class="number">1</span>), (<span class="number">2</span>, <span class="number">1</span>), (<span class="number">2</span>, <span class="number">2</span>), (<span class="number">2</span>, <span class="number">3</span>), (<span class="number">1</span>, <span class="number">3</span>), (<span class="number">0</span>, <span class="number">3</span>)]</span><br></pre></td></tr></tbody></table></figure></div>
<h2 id="机器人的运动范围"><a class="markdownIt-Anchor" href="#机器人的运动范围"></a> 机器人的运动范围</h2>
<p><strong>题目来源</strong>：剑指Offer<br>
<strong>题目链接</strong>：<a href="https://www.nowcoder.com/practice/6e5207314b5241fb83f2329e89fdecc8?tpId=13&tqId=11219&tPage=4&rp=4&ru=/ta/coding-interviews&qru=/ta/coding-interviews/question-ranking" target="_blank" rel="noopener">牛客网-剑指Offer</a><br>
<strong>题目描述</strong>：</p>
<blockquote>
<p>地上有一个m行和n列的方格。一个机器人从坐标0,0的格子开始移动，每一次只能向左，右，上，下四个方向移动一格，但是不能进入行坐标和列坐标的数位之和大于k的格子。 例如，当k为18时，机器人能够进入方格（35,37），因为3+5+3+7 = 18。但是，它不能进入方格（35,38），因为3+5+3+8 = 19。请问该机器人能够达到多少个格子？</p>
</blockquote>
<h3 id="解题思路-2"><a class="markdownIt-Anchor" href="#解题思路-2"></a> 解题思路</h3>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">count</span><span class="params">(self, r, c)</span>:</span> <span class="comment"># 计算横纵坐标各数位之和</span></span><br><span class="line">        s = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span>(r):</span><br><span class="line">            s += r % <span class="number">10</span></span><br><span class="line">            r //= <span class="number">10</span></span><br><span class="line">        <span class="keyword">while</span>(c):</span><br><span class="line">            s += c % <span class="number">10</span></span><br><span class="line">            c //= <span class="number">10</span></span><br><span class="line">        <span class="keyword">return</span> s</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">judge</span><span class="params">(self, r, c)</span>:</span></span><br><span class="line">        <span class="keyword">if</span>(r < <span class="number">0</span> <span class="keyword">or</span> r >= self.rows <span class="keyword">or</span> <span class="comment"># 越界</span></span><br><span class="line">           c < <span class="number">0</span> <span class="keyword">or</span> c >= self.cols <span class="keyword">or</span> <span class="comment"># 越界</span></span><br><span class="line">           self.visited[r][c] == <span class="number">1</span>):  <span class="comment"># 已访问</span></span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">if</span>(self.count(r, c) > self.threshold): <span class="comment"># 坐标数位之和超过阈值则stop</span></span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        self.length += <span class="number">1</span> <span class="comment"># 机器人可访问的格子数+1</span></span><br><span class="line">        self.visited[r][c] = <span class="number">1</span> <span class="comment"># 标记当前位置已访问</span></span><br><span class="line">        self.judge(r<span class="number">-1</span>, c) <span class="comment"># 上侧</span></span><br><span class="line">        self.judge(r+<span class="number">1</span>, c) <span class="comment"># 下侧</span></span><br><span class="line">        self.judge(r, c<span class="number">-1</span>) <span class="comment"># 左侧</span></span><br><span class="line">        self.judge(r, c+<span class="number">1</span>) <span class="comment"># 右侧</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">movingCount</span><span class="params">(self, threshold, rows, cols)</span>:</span> <span class="comment"># main</span></span><br><span class="line">        self.threshold = threshold</span><br><span class="line">        self.rows = rows</span><br><span class="line">        self.cols = cols</span><br><span class="line">        self.length = <span class="number">0</span> <span class="comment"># 记录机器人可访问的格子数，初始化为0</span></span><br><span class="line">        self.visited = [[<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(cols)] <span class="keyword">for</span> _ <span class="keyword">in</span> range(rows)] <span class="comment"># 记录对应位置是否已访问</span></span><br><span class="line"></span><br><span class="line">        self.judge(<span class="number">0</span>, <span class="number">0</span>) <span class="comment"># 从(0, 0)位置开始遍历</span></span><br><span class="line">        <span class="keyword">return</span> self.length</span><br></pre></td></tr></tbody></table></figure></div>
<blockquote>
<p>注意：这道题没有进行 ‘self.visited[r][c] = 0’ 取消访问标记的操作，因为这道题问的是<strong>最多</strong>能到达的格子数，若改成能通过的<strong>最长</strong>路径，则需要取消标记。</p>
</blockquote>
<h3 id="运行结果-2"><a class="markdownIt-Anchor" href="#运行结果-2"></a> 运行结果</h3>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">solu = Solution()</span><br><span class="line">print(solu.movingCount(<span class="number">5</span>, <span class="number">10</span>, <span class="number">10</span>))</span><br><span class="line">print(solu.movingCount(<span class="number">10</span>, <span class="number">1</span>, <span class="number">100</span>))</span><br><span class="line"></span><br><span class="line"><span class="meta">>>> </span><span class="number">21</span></span><br><span class="line"><span class="meta">>>> </span><span class="number">29</span></span><br></pre></td></tr></tbody></table></figure></div>
<h2 id="电话号码的字母组合"><a class="markdownIt-Anchor" href="#电话号码的字母组合"></a> 电话号码的字母组合</h2>
<p><strong>题目来源</strong>：Leetcode<br>
<strong>题目链接</strong>：<a href="https://leetcode-cn.com/problems/letter-combinations-of-a-phone-number/" target="_blank" rel="noopener">Leetcode-17</a><br>
<strong>题目描述</strong>：</p>
<blockquote>
<p>给定一个仅包含数字 2 - 9 的字符串，返回所有它能表示的字母组合。<br>
给出数字到字母的映射如下（与电话按键相同）。注意 1 不对应任何字母。<br>
<img alt data-src="https://i.loli.net/2020/01/16/H1AOUE2SL7YJk3t.png" class="lazyload"></p>
</blockquote>
<h3 id="解题思路-3"><a class="markdownIt-Anchor" href="#解题思路-3"></a> 解题思路</h3>
<p>深度优先遍历即可</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.dict = dict({<span class="string">'0'</span>:<span class="string">''</span>,</span><br><span class="line">                          <span class="string">'1'</span>:<span class="string">''</span>,</span><br><span class="line">                          <span class="string">'2'</span>:<span class="string">'abc'</span>,</span><br><span class="line">                          <span class="string">'3'</span>:<span class="string">'def'</span>,</span><br><span class="line">                          <span class="string">'4'</span>:<span class="string">'ghi'</span>,</span><br><span class="line">                          <span class="string">'5'</span>:<span class="string">'jkl'</span>,</span><br><span class="line">                          <span class="string">'6'</span>:<span class="string">'mno'</span>,</span><br><span class="line">                          <span class="string">'7'</span>:<span class="string">'pqrs'</span>,</span><br><span class="line">                          <span class="string">'8'</span>:<span class="string">'tuv'</span>,</span><br><span class="line">                          <span class="string">'9'</span>:<span class="string">'wxyz'</span>})</span><br><span class="line">        self.result = []</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">backtrack</span><span class="params">(self, digits, idx, curr)</span>:</span></span><br><span class="line">        <span class="keyword">if</span>(idx == len(digits)):</span><br><span class="line">            self.result.append(curr) <span class="comment"># 当前字符串达到长度要求时，返回</span></span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">for</span> c <span class="keyword">in</span> self.dict[digits[idx]]:</span><br><span class="line">            self.backtrack(digits, idx + <span class="number">1</span>, curr + c) <span class="comment"># 递归下一个数字对应的字母</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">letterCombinations</span><span class="params">(self, digits)</span>:</span> <span class="comment"># main</span></span><br><span class="line">        <span class="keyword">if</span>(digits == <span class="string">''</span>):</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line">        self.backtrack(digits, <span class="number">0</span>, <span class="string">''</span>)</span><br><span class="line">        <span class="keyword">return</span> self.result</span><br></pre></td></tr></tbody></table></figure></div>
<h3 id="运行结果-3"><a class="markdownIt-Anchor" href="#运行结果-3"></a> 运行结果</h3>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">solu = Solution()</span><br><span class="line">print(solu.letterCombinations(<span class="string">"23"</span>))</span><br><span class="line"></span><br><span class="line"><span class="meta">>>> </span>[<span class="string">'ad'</span>, <span class="string">'ae'</span>, <span class="string">'af'</span>, <span class="string">'bd'</span>, <span class="string">'be'</span>, <span class="string">'bf'</span>, <span class="string">'cd'</span>, <span class="string">'ce'</span>, <span class="string">'cf'</span>]</span><br></pre></td></tr></tbody></table></figure></div>
<h2 id="解数独"><a class="markdownIt-Anchor" href="#解数独"></a> 解数独</h2>
<p><strong>题目来源</strong>：Leetcode<br>
<strong>题目链接</strong>：<a href="https://leetcode-cn.com/problems/sudoku-solver/" target="_blank" rel="noopener">Leetcode-37</a><br>
<strong>题目描述</strong>：</p>
<blockquote>
<p>编写一个程序，通过已填充的空格来解决数独问题。<br>
一个数独的解法需遵循如下规则：<br>
1、数字 1-9 在每一行只能出现一次。<br>
2、数字 1-9 在每一列只能出现一次。<br>
3、数字 1-9 在每一个以粗实线分隔的 3x3 宫内只能出现一次。<br>
空白格用 ‘.’ 表示。<br>
<img alt data-src="https://i.loli.net/2020/01/17/PWb39upSzLg1QTD.png" class="lazyload"><br>
一个数独。<br>
<img alt data-src="https://i.loli.net/2020/01/17/5iSkutNWdhI3ZoK.png" class="lazyload"><br>
答案被标成红色。</p>
</blockquote>
<h3 id="解题思路-4"><a class="markdownIt-Anchor" href="#解题思路-4"></a> 解题思路</h3>
<ul>
<li>按照从左到右、从上到下的顺序遍历所有位置</li>
<li>从1~9选择合适的数字依次填入
<ul>
<li>若当前无合适的数字，则回溯</li>
<li>若已到达最后位置，则数独已解决</li>
</ul>
</li>
</ul>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">placeNum</span><span class="params">(self, r, c, num)</span>:</span> <span class="comment"># 更新Flags</span></span><br><span class="line">        self.rowFlag[r][num] = <span class="number">1</span></span><br><span class="line">        self.colFlag[c][num] = <span class="number">1</span></span><br><span class="line">        self.boxFlag[r//<span class="number">3</span>*<span class="number">3</span> + c//<span class="number">3</span>][num] = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">removeNum</span><span class="params">(self, r, c, num)</span>:</span> <span class="comment"># 移除Flags</span></span><br><span class="line">        self.rowFlag[r][num] = <span class="number">0</span></span><br><span class="line">        self.colFlag[c][num] = <span class="number">0</span></span><br><span class="line">        self.boxFlag[r//<span class="number">3</span>*<span class="number">3</span> + c//<span class="number">3</span>][num] = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">judge</span><span class="params">(self, r, c, num)</span>:</span> <span class="comment"># 判断当前位置能否填入数字num</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">not</span> self.rowFlag[r][num] <span class="keyword">and</span></span><br><span class="line">           <span class="keyword">not</span> self.colFlag[c][num] <span class="keyword">and</span></span><br><span class="line">           <span class="keyword">not</span> self.boxFlag[r//<span class="number">3</span>*<span class="number">3</span> + c//<span class="number">3</span>][num]):</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">placeNext</span><span class="params">(self, r, c)</span>:</span> <span class="comment"># 判断数独是否已解决，并填入下一个数字</span></span><br><span class="line">        <span class="keyword">if</span>(r == <span class="number">8</span> <span class="keyword">and</span> c == <span class="number">8</span>): <span class="comment"># 若当前位置已有数字且为最后一位</span></span><br><span class="line">            self.solved = <span class="literal">True</span> <span class="comment"># 数独已解决</span></span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="comment"># 总体按照从左到右、从上到下的顺序进行递归</span></span><br><span class="line">        <span class="keyword">if</span>(c == <span class="number">8</span>): <span class="comment"># 若当前为最右侧的位置，则从下一行头部继续递归</span></span><br><span class="line">            self.backtrack(r+<span class="number">1</span>, <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">else</span>: <span class="comment"># 否则递归计算右侧一格</span></span><br><span class="line">            self.backtrack(r, c+<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">backtrack</span><span class="params">(self, r, c)</span>:</span></span><br><span class="line">        <span class="keyword">if</span>(r >= <span class="number">9</span> <span class="keyword">or</span> c >= <span class="number">9</span>):</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">if</span>(self.board[r][c] != <span class="string">'.'</span>): <span class="comment"># 当前位置已有数字</span></span><br><span class="line">            self.placeNext(r, c) <span class="comment"># 填入下一个数字</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">10</span>): <span class="comment"># 从1到9进行遍历</span></span><br><span class="line">                <span class="keyword">if</span>(self.judge(r, c, i)): <span class="comment"># 判断当前位置是否能填该数字</span></span><br><span class="line">                    self.board[r][c] = str(i) <span class="comment"># 填入数字</span></span><br><span class="line">                    self.placeNum(r, c, i) <span class="comment"># 更新Flags</span></span><br><span class="line"></span><br><span class="line">                    self.placeNext(r, c) <span class="comment"># 填入下一个数字</span></span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span>(<span class="keyword">not</span> self.solved): <span class="comment"># 若数独还未解决，则回溯时需清除填入的信息；否则保留填入的信息</span></span><br><span class="line">                        self.board[r][c] = <span class="string">'.'</span> <span class="comment"># 移除数字</span></span><br><span class="line">                        self.removeNum(r, c, i) <span class="comment"># 移除Flags</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">solveSudoku</span><span class="params">(self, board)</span>:</span> <span class="comment"># main</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type board: List[List[str]]</span></span><br><span class="line"><span class="string">        :rtype: None Do not return anything, modify board in-place instead.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        self.board = board</span><br><span class="line">        self.rowFlag = [[<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">10</span>)] <span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">9</span>)] <span class="comment"># 行标识，每一行1~9</span></span><br><span class="line">        self.colFlag = [[<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">10</span>)] <span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">9</span>)] <span class="comment"># 列标识，每一列1~9</span></span><br><span class="line">        self.boxFlag = [[<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">10</span>)] <span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">9</span>)] <span class="comment"># 块标识，3x3九宫格1~9</span></span><br><span class="line">        self.solved = <span class="literal">False</span> <span class="comment"># 数独是/否解决 标识位</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 初始化Flags</span></span><br><span class="line">        <span class="keyword">for</span> r <span class="keyword">in</span> range(<span class="number">9</span>):</span><br><span class="line">            <span class="keyword">for</span> c <span class="keyword">in</span> range(<span class="number">9</span>):</span><br><span class="line">                <span class="keyword">if</span>(board[r][c] != <span class="string">'.'</span>):</span><br><span class="line">                    num = int(board[r][c])</span><br><span class="line">                    self.placeNum(r, c, num)</span><br><span class="line">        <span class="comment"># 从头部开始递归</span></span><br><span class="line">        self.backtrack(<span class="number">0</span>, <span class="number">0</span>)</span><br></pre></td></tr></tbody></table></figure></div>
<h3 id="运行结果-4"><a class="markdownIt-Anchor" href="#运行结果-4"></a> 运行结果</h3>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pprint <span class="keyword">import</span> pprint</span><br><span class="line">solu = Solution()</span><br><span class="line">solu.solveSudoku([[<span class="string">'5'</span>, <span class="string">'3'</span>, <span class="string">'.'</span>, <span class="string">'.'</span>, <span class="string">'7'</span>, <span class="string">'.'</span>, <span class="string">'.'</span>, <span class="string">'.'</span>, <span class="string">'.'</span>],</span><br><span class="line">                  [<span class="string">'6'</span>, <span class="string">'.'</span>, <span class="string">'.'</span>, <span class="string">'1'</span>, <span class="string">'9'</span>, <span class="string">'5'</span>, <span class="string">'.'</span>, <span class="string">'.'</span>, <span class="string">'.'</span>],</span><br><span class="line">                  [<span class="string">'.'</span>, <span class="string">'9'</span>, <span class="string">'8'</span>, <span class="string">'.'</span>, <span class="string">'.'</span>, <span class="string">'.'</span>, <span class="string">'.'</span>, <span class="string">'6'</span>, <span class="string">'.'</span>],</span><br><span class="line">                  [<span class="string">'8'</span>, <span class="string">'.'</span>, <span class="string">'.'</span>, <span class="string">'.'</span>, <span class="string">'6'</span>, <span class="string">'.'</span>, <span class="string">'.'</span>, <span class="string">'.'</span>, <span class="string">'3'</span>],</span><br><span class="line">                  [<span class="string">'4'</span>, <span class="string">'.'</span>, <span class="string">'.'</span>, <span class="string">'8'</span>, <span class="string">'.'</span>, <span class="string">'3'</span>, <span class="string">'.'</span>, <span class="string">'.'</span>, <span class="string">'1'</span>],</span><br><span class="line">                  [<span class="string">'7'</span>, <span class="string">'.'</span>, <span class="string">'.'</span>, <span class="string">'.'</span>, <span class="string">'2'</span>, <span class="string">'.'</span>, <span class="string">'.'</span>, <span class="string">'.'</span>, <span class="string">'6'</span>],</span><br><span class="line">                  [<span class="string">'.'</span>, <span class="string">'6'</span>, <span class="string">'.'</span>, <span class="string">'.'</span>, <span class="string">'.'</span>, <span class="string">'.'</span>, <span class="string">'2'</span>, <span class="string">'8'</span>, <span class="string">'.'</span>],</span><br><span class="line">                  [<span class="string">'.'</span>, <span class="string">'.'</span>, <span class="string">'.'</span>, <span class="string">'4'</span>, <span class="string">'1'</span>, <span class="string">'9'</span>, <span class="string">'.'</span>, <span class="string">'.'</span>, <span class="string">'5'</span>],</span><br><span class="line">                  [<span class="string">'.'</span>, <span class="string">'.'</span>, <span class="string">'.'</span>, <span class="string">'.'</span>, <span class="string">'8'</span>, <span class="string">'.'</span>, <span class="string">'.'</span>, <span class="string">'7'</span>, <span class="string">'9'</span>]])</span><br><span class="line">pprint(solu.board)</span><br><span class="line"></span><br><span class="line"><span class="meta">>>> </span>[[<span class="string">'5'</span>, <span class="string">'3'</span>, <span class="string">'4'</span>, <span class="string">'6'</span>, <span class="string">'7'</span>, <span class="string">'8'</span>, <span class="string">'9'</span>, <span class="string">'1'</span>, <span class="string">'2'</span>],</span><br><span class="line">     [<span class="string">'6'</span>, <span class="string">'7'</span>, <span class="string">'2'</span>, <span class="string">'1'</span>, <span class="string">'9'</span>, <span class="string">'5'</span>, <span class="string">'3'</span>, <span class="string">'4'</span>, <span class="string">'8'</span>],</span><br><span class="line">     [<span class="string">'1'</span>, <span class="string">'9'</span>, <span class="string">'8'</span>, <span class="string">'3'</span>, <span class="string">'4'</span>, <span class="string">'2'</span>, <span class="string">'5'</span>, <span class="string">'6'</span>, <span class="string">'7'</span>],</span><br><span class="line">     [<span class="string">'8'</span>, <span class="string">'5'</span>, <span class="string">'9'</span>, <span class="string">'7'</span>, <span class="string">'6'</span>, <span class="string">'1'</span>, <span class="string">'4'</span>, <span class="string">'2'</span>, <span class="string">'3'</span>],</span><br><span class="line">     [<span class="string">'4'</span>, <span class="string">'2'</span>, <span class="string">'6'</span>, <span class="string">'8'</span>, <span class="string">'5'</span>, <span class="string">'3'</span>, <span class="string">'7'</span>, <span class="string">'9'</span>, <span class="string">'1'</span>],</span><br><span class="line">     [<span class="string">'7'</span>, <span class="string">'1'</span>, <span class="string">'3'</span>, <span class="string">'9'</span>, <span class="string">'2'</span>, <span class="string">'4'</span>, <span class="string">'8'</span>, <span class="string">'5'</span>, <span class="string">'6'</span>],</span><br><span class="line">     [<span class="string">'9'</span>, <span class="string">'6'</span>, <span class="string">'1'</span>, <span class="string">'5'</span>, <span class="string">'3'</span>, <span class="string">'7'</span>, <span class="string">'2'</span>, <span class="string">'8'</span>, <span class="string">'4'</span>],</span><br><span class="line">     [<span class="string">'2'</span>, <span class="string">'8'</span>, <span class="string">'7'</span>, <span class="string">'4'</span>, <span class="string">'1'</span>, <span class="string">'9'</span>, <span class="string">'6'</span>, <span class="string">'3'</span>, <span class="string">'5'</span>],</span><br><span class="line">     [<span class="string">'3'</span>, <span class="string">'4'</span>, <span class="string">'5'</span>, <span class="string">'2'</span>, <span class="string">'8'</span>, <span class="string">'6'</span>, <span class="string">'1'</span>, <span class="string">'7'</span>, <span class="string">'9'</span>]]</span><br></pre></td></tr></tbody></table></figure></div>
<h2 id="n皇后"><a class="markdownIt-Anchor" href="#n皇后"></a> N皇后</h2>
<p><strong>题目来源</strong>：Leetcode<br>
<strong>题目链接</strong>：<a href="https://leetcode-cn.com/problems/n-queens/" target="_blank" rel="noopener">Leetcode-51</a><br>
<strong>题目描述</strong>：</p>
<blockquote>
<p>n 皇后问题研究的是如何将 n 个皇后放置在 n×n 的棋盘上，并且使皇后彼此之间不能相互攻击。<br>
<img alt data-src="https://i.loli.net/2020/01/17/KszGb26eJ1FvAOZ.png" class="lazyload"><br>
上图为 8 皇后问题的一种解法。<br>
给定一个整数 n，返回所有不同的 n 皇后问题的解决方案。<br>
每一种解法包含一个明确的 n 皇后问题的棋子放置方案，该方案中 ‘Q’ 和 ‘.’ 分别代表了皇后和空位。</p>
</blockquote>
<h3 id="解题思路-5"><a class="markdownIt-Anchor" href="#解题思路-5"></a> 解题思路</h3>
<p>N皇后问题实际上就是在NxN的数组中，对每一行找到一个位置，使得最终N个皇后不同行、不同列、不处于同一个主副对角线，我们最终要得到的结果实际上是一个list，其中第 <strong>i</strong> 个元素值 <strong>j</strong> 代表第 <strong>i</strong> 行的皇后处于第 <strong>j</strong> 列。<br>
因此，我们只需要遍历每一行的N个值，遇到冲突时回溯即可。</p>
<blockquote>
<p>对于所有的主对角线有 <strong>行号 + 列号 = 常数</strong>，对于所有的副对角线有 <strong>行号 - 列号 = 常数</strong>。</p>
</blockquote>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">backtrack</span><span class="params">(self, r, c)</span>:</span></span><br><span class="line">        <span class="keyword">if</span>(r >= self.n <span class="keyword">or</span> c >= self.n <span class="keyword">or</span> <span class="comment"># 越界</span></span><br><span class="line">           self.mainDiagFlag[r-c] <span class="keyword">or</span>     <span class="comment"># 主对角线冲突</span></span><br><span class="line">           self.counterDiagFlag[r+c] <span class="keyword">or</span>  <span class="comment"># 副对角线冲突</span></span><br><span class="line">           self.rowFlag[r] <span class="keyword">or</span>            <span class="comment"># 行冲突</span></span><br><span class="line">           self.colFlag[c]):             <span class="comment"># 列冲突</span></span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        self.mainDiagFlag[r-c], self.counterDiagFlag[r+c] = <span class="number">1</span>, <span class="number">1</span></span><br><span class="line">        self.rowFlag[r], self.colFlag[c] = <span class="number">1</span>, <span class="number">1</span></span><br><span class="line">        self.seq.append(c)</span><br><span class="line">        <span class="keyword">if</span>(len(self.seq) == self.n): <span class="comment"># 若当前序列已完成，则将其入栈self.result</span></span><br><span class="line">            self.result.append(list(self.seq)) <span class="comment"># 若不加list()，会导致入栈内容为空</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(self.n): <span class="comment"># 对下一行的每个位置进行遍历递归</span></span><br><span class="line">            self.backtrack(r+<span class="number">1</span>, i)</span><br><span class="line">        self.mainDiagFlag[r-c], self.counterDiagFlag[r+c] = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">        self.rowFlag[r], self.colFlag[c] = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">        self.seq.pop()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">solveNQueens</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type n: int</span></span><br><span class="line"><span class="string">        :rtype: List[List[str]]</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">if</span>(n <= <span class="number">0</span>):</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line">        self.n = n</span><br><span class="line">        self.mainDiagFlag = [<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">2</span> * n - <span class="number">1</span>)]       <span class="comment"># 主对角线标识</span></span><br><span class="line">        self.counterDiagFlag = [<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">2</span> * n - <span class="number">1</span>)]    <span class="comment"># 副对角线标识</span></span><br><span class="line">        self.rowFlag = [<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(n)]                    <span class="comment"># 行标识</span></span><br><span class="line">        self.colFlag = [<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(n)]                    <span class="comment"># 列标识</span></span><br><span class="line">        self.seq = [] <span class="comment"># 单个结果序列，seq[i]=j 代表第i行第j列放上皇后</span></span><br><span class="line">        self.result = [] <span class="comment"># 最终结果</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> c <span class="keyword">in</span> range(n): <span class="comment"># 对第1行的每个位置进行遍历递归</span></span><br><span class="line">            self.backtrack(<span class="number">0</span>, c)</span><br><span class="line">        <span class="keyword">return</span> [[<span class="string">'.'</span>*c + <span class="string">'Q'</span> + <span class="string">'.'</span>*(n-c<span class="number">-1</span>) <span class="keyword">for</span> c <span class="keyword">in</span> seq] <span class="keyword">for</span> seq <span class="keyword">in</span> self.result] <span class="comment"># 返回题目要求的输出格式</span></span><br></pre></td></tr></tbody></table></figure></div>
<h3 id="运行结果-5"><a class="markdownIt-Anchor" href="#运行结果-5"></a> 运行结果</h3>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">solu = Solution()</span><br><span class="line">print(solu.solveNQueens(<span class="number">4</span>))</span><br><span class="line"></span><br><span class="line"><span class="meta">>>> </span>[[<span class="string">'.Q..'</span>, </span><br><span class="line">      <span class="string">'...Q'</span>, </span><br><span class="line">      <span class="string">'Q...'</span>, </span><br><span class="line">      <span class="string">'..Q.'</span>],</span><br><span class="line"></span><br><span class="line">     [<span class="string">'..Q.'</span>, </span><br><span class="line">      <span class="string">'Q...'</span>, </span><br><span class="line">      <span class="string">'...Q'</span>, </span><br><span class="line">      <span class="string">'.Q..'</span>]]</span><br></pre></td></tr></tbody></table></figure></div>
<h3 id="优化"><a class="markdownIt-Anchor" href="#优化"></a> 优化</h3>
<blockquote>
<p>注意一个细节：一行只可能有一个皇后，一列也只可能有一个皇后。<br>
这意味着没有必要考虑棋盘上所有的方格，只需要按行或列循环即可，这样也能省掉rowFlag和colFlag这两个标识，降低复杂度。</p>
</blockquote>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">backtrack</span><span class="params">(self, r)</span>:</span></span><br><span class="line">        <span class="keyword">for</span> c <span class="keyword">in</span> range(self.n):</span><br><span class="line">            <span class="keyword">if</span>(c <span class="keyword">in</span> self.seq <span class="keyword">or</span>             <span class="comment"># 列已存在序列中</span></span><br><span class="line">               self.mainDiagFlag[r-c] <span class="keyword">or</span>    <span class="comment"># 主对角线冲突</span></span><br><span class="line">               self.counterDiagFlag[r+c]):  <span class="comment"># 副对角线冲突</span></span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            self.mainDiagFlag[r-c], self.counterDiagFlag[r+c] = <span class="number">1</span>, <span class="number">1</span></span><br><span class="line">            self.seq.append(c)</span><br><span class="line">            <span class="keyword">if</span>(len(self.seq) == self.n): <span class="comment"># 若当前序列已完成，则将其入栈self.result</span></span><br><span class="line">                self.result.append(list(self.seq)) <span class="comment"># 若不加list()，会导致入栈内容为空</span></span><br><span class="line">            self.backtrack(r+<span class="number">1</span>) <span class="comment"># 递归下一行</span></span><br><span class="line">            self.mainDiagFlag[r-c], self.counterDiagFlag[r+c] = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">            self.seq.pop()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">solveNQueens</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type n: int</span></span><br><span class="line"><span class="string">        :rtype: List[List[str]]</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">if</span>(n <= <span class="number">0</span>):</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line">        self.n = n</span><br><span class="line">        self.mainDiagFlag = [<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">2</span> * n - <span class="number">1</span>)]       <span class="comment"># 主对角线标识</span></span><br><span class="line">        self.counterDiagFlag = [<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">2</span> * n - <span class="number">1</span>)]    <span class="comment"># 副对角线标识</span></span><br><span class="line">        self.seq = [] <span class="comment"># 单个结果序列，seq[i]=j 代表第i行第j列放上皇后</span></span><br><span class="line">        self.result = [] <span class="comment"># 最终结果</span></span><br><span class="line"></span><br><span class="line">        self.backtrack(<span class="number">0</span>) <span class="comment"># 从第1行开始遍历</span></span><br><span class="line">        <span class="keyword">return</span> [[<span class="string">'.'</span>*c + <span class="string">'Q'</span> + <span class="string">'.'</span>*(n-c<span class="number">-1</span>) <span class="keyword">for</span> c <span class="keyword">in</span> seq] <span class="keyword">for</span> seq <span class="keyword">in</span> self.result] <span class="comment"># 返回题目要求的输出格式</span></span><br></pre></td></tr></tbody></table></figure></div></body></html></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Reborn</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://reborn8888.github.io/2020/01/16/%E5%9B%9E%E6%BA%AF%E6%B3%95/">https://reborn8888.github.io/2020/01/16/%E5%9B%9E%E6%BA%AF%E6%B3%95/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://ReBoRn8888.github.io">Reborn</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Algorithm/">Algorithm    </a><a class="post-meta__tags" href="/tags/%E5%9B%9E%E6%BA%AF%E6%B3%95/">回溯法    </a><a class="post-meta__tags" href="/tags/%E9%80%92%E5%BD%92/">递归    </a></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2020/01/16/HonEJBSegxdMpOj.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="https://i.loli.net/2019/12/08/sLmoV1atujlQPRY.png" alt="微信"><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="https://i.loli.net/2019/12/08/HhJfxq64XDn3LMK.png" alt="支付寶"><div class="post-qr-code__desc">支付寶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/01/29/%E5%A5%87%E5%BC%82%E5%80%BC%E5%88%86%E8%A7%A3/"><img class="prev_cover lazyload" data-src="https://i.loli.net/2020/01/29/ml4paJ7LBQstu8q.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">上一篇</div><div class="prev_info"><span>奇异值分解——《统计学习方法》第15章学习笔记</span></div></a></div><div class="next-post pull_right"><a href="/2019/12/26/%E6%BF%80%E6%B4%BB%E5%87%BD%E6%95%B0/"><img class="next_cover lazyload" data-src="https://i.loli.net/2020/01/29/Ac2ZVNXBoKrdI8O.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>激活函数</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/05/09/牛顿迭代法/" title="牛顿迭代法"><img class="relatedPosts_cover lazyload"data-src="https://i.loli.net/2020/05/09/C8twEFxrDJGdpTq.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2021-09-14</div><div class="relatedPosts_title">牛顿迭代法</div></div></a></div><div class="relatedPosts_item"><a href="/2019/12/18/二叉树/" title="二叉树"><img class="relatedPosts_cover lazyload"data-src="https://i.loli.net/2019/12/18/5wXD8Q4lsPtduSk.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2021-09-14</div><div class="relatedPosts_title">二叉树</div></div></a></div><div class="relatedPosts_item"><a href="/2019/12/14/堆排序/" title="堆排序"><img class="relatedPosts_cover lazyload"data-src="https://i.loli.net/2020/01/29/fb3IgexDkNtywap.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2021-09-14</div><div class="relatedPosts_title">堆排序</div></div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var notify = false == true ? true : false;
var verify = false == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;

window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'2boKvi6UsSeUABpVH99z87cj-gzGzoHsz',
  appKey:'instDcdLyY9Ace9gcgI1eQh3',
  placeholder:'Please leave your footprints',
  avatar:'monsterid',
  guest_info:guest_info,
  pageSize:'10',
  lang:'en',
  recordIP: true
});</script></div></div></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2021 By Reborn</div><div class="framework-info"><span>驱动 </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly"><span>Butterfly</span></a></div><div class="footer_custom_text">Hi, welcome to my <u><a href="https://reborn8888.github.io/">Blog</a></u>!</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">簡</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css"><script>$(function () {
  $('span.katex-display').wrap('<div class="katex-wrap"></div>')
})</script><script id="ribbon_piao" mobile="false" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/js/piao.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>